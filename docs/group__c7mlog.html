<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libc7: c7mlog.h</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libc7
   &#160;<span id="projectnumber">r0.2.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">c7mlog.h</div>  </div>
</div><!--header-->
<div class="contents">

<p>mmap領域に記録するデバッグログ機能  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:structc7__mlog__info__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c7mlog.html#structc7__mlog__info__t">c7_mlog_info_t</a></td></tr>
<tr class="memdesc:structc7__mlog__info__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">mlog から取り出した記録単位毎の各種情報。  <a href="group__c7mlog.html#structc7__mlog__info__t">More...</a><br /></td></tr>
<tr class="separator:structc7__mlog__info__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga96fc73861bceae86bfe71b6634e38963"><td class="memItemLeft" align="right" valign="top"><a id="ga96fc73861bceae86bfe71b6634e38963"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c7mlog.html#ga96fc73861bceae86bfe71b6634e38963">C7_MLOG_AUTO_TIME</a>&#160;&#160;&#160;((<a class="el" href="group__c7types.html#ga96c2ceb3c14d78749990504fa9d8d373">c7_time_t</a>)-1)</td></tr>
<tr class="memdesc:ga96fc73861bceae86bfe71b6634e38963"><td class="mdescLeft">&#160;</td><td class="mdescRight">時刻をライブラリで求めることを意味する特別な引数値。 <br /></td></tr>
<tr class="separator:ga96fc73861bceae86bfe71b6634e38963"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabecf90bcaeba1d05ae3589106f0d8058"><td class="memItemLeft" align="right" valign="top"><a id="gabecf90bcaeba1d05ae3589106f0d8058"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c7mlog.html#gabecf90bcaeba1d05ae3589106f0d8058">C7_MLOG_C_MIN</a>&#160;&#160;&#160;(0U)</td></tr>
<tr class="memdesc:gabecf90bcaeba1d05ae3589106f0d8058"><td class="mdescLeft">&#160;</td><td class="mdescRight">ログカテゴリの最小値 <br /></td></tr>
<tr class="separator:gabecf90bcaeba1d05ae3589106f0d8058"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa203ca4ae83c90dc496bf0a28e21aa4a"><td class="memItemLeft" align="right" valign="top"><a id="gaa203ca4ae83c90dc496bf0a28e21aa4a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c7mlog.html#gaa203ca4ae83c90dc496bf0a28e21aa4a">C7_MLOG_C_MAX</a>&#160;&#160;&#160;(31U)</td></tr>
<tr class="memdesc:gaa203ca4ae83c90dc496bf0a28e21aa4a"><td class="mdescLeft">&#160;</td><td class="mdescRight">ログカテゴリの最大値 <br /></td></tr>
<tr class="separator:gaa203ca4ae83c90dc496bf0a28e21aa4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad4c1db81060b1ae28281e6b9224c672a"><td class="memItemLeft" align="right" valign="top"><a id="gad4c1db81060b1ae28281e6b9224c672a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c7mlog.html#gad4c1db81060b1ae28281e6b9224c672a">C7_MLOG_F_THREAD_NAME</a></td></tr>
<tr class="memdesc:gad4c1db81060b1ae28281e6b9224c672a"><td class="mdescLeft">&#160;</td><td class="mdescRight">スレッド名を記録する <br /></td></tr>
<tr class="separator:gad4c1db81060b1ae28281e6b9224c672a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga44f795e65056825db51c785ef9e46d25"><td class="memItemLeft" align="right" valign="top"><a id="ga44f795e65056825db51c785ef9e46d25"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c7mlog.html#ga44f795e65056825db51c785ef9e46d25">C7_MLOG_F_SOURCE_NAME</a></td></tr>
<tr class="memdesc:ga44f795e65056825db51c785ef9e46d25"><td class="mdescLeft">&#160;</td><td class="mdescRight">ソースファイル名を記録する <br /></td></tr>
<tr class="separator:ga44f795e65056825db51c785ef9e46d25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5c763b951b30315e94a638ae0ad2e966"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c7mlog.html#ga5c763b951b30315e94a638ae0ad2e966">c7mlog</a>(g,  v, ...)</td></tr>
<tr class="memdesc:ga5c763b951b30315e94a638ae0ad2e966"><td class="mdescLeft">&#160;</td><td class="mdescRight">dconf の C7_DCONF_MLOG の設定からログレベルによる記録の抑制を行うマクロ。 ログレベル v には C7_LOG_xxx の xxx のみを指定する。  <a href="#ga5c763b951b30315e94a638ae0ad2e966">More...</a><br /></td></tr>
<tr class="separator:ga5c763b951b30315e94a638ae0ad2e966"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gae3435b61d298e3eee6dd52f8fa896ada"><td class="memItemLeft" align="right" valign="top"><a id="gae3435b61d298e3eee6dd52f8fa896ada"></a>
typedef struct c7_mlog_t_ *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c7mlog.html#gae3435b61d298e3eee6dd52f8fa896ada">c7_mlog_t</a></td></tr>
<tr class="memdesc:gae3435b61d298e3eee6dd52f8fa896ada"><td class="mdescLeft">&#160;</td><td class="mdescRight">mlogオブジェクト <br /></td></tr>
<tr class="separator:gae3435b61d298e3eee6dd52f8fa896ada"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gadcf62288ff8d0a75454a2e0bdd3dbfbe"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__c7mlog.html#gae3435b61d298e3eee6dd52f8fa896ada">c7_mlog_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c7mlog.html#gadcf62288ff8d0a75454a2e0bdd3dbfbe">c7_mlog_open_w</a> (const char *name, size_t hdrsize_b, size_t logsize_b, const char *hint_op, uint32_t flags)</td></tr>
<tr class="memdesc:gadcf62288ff8d0a75454a2e0bdd3dbfbe"><td class="mdescLeft">&#160;</td><td class="mdescRight">mlogを書き込みモードでオープンする。  <a href="#gadcf62288ff8d0a75454a2e0bdd3dbfbe">More...</a><br /></td></tr>
<tr class="separator:gadcf62288ff8d0a75454a2e0bdd3dbfbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga767749dadbd65d9a04f63668b9354d78"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c7mlog.html#ga767749dadbd65d9a04f63668b9354d78">c7_mlog_hdraddr</a> (<a class="el" href="group__c7mlog.html#gae3435b61d298e3eee6dd52f8fa896ada">c7_mlog_t</a> mlog, size_t *hdrsize_b_op)</td></tr>
<tr class="memdesc:ga767749dadbd65d9a04f63668b9354d78"><td class="mdescLeft">&#160;</td><td class="mdescRight">mlogのアプリケーションエリアのアドレスを得る。  <a href="#ga767749dadbd65d9a04f63668b9354d78">More...</a><br /></td></tr>
<tr class="separator:ga767749dadbd65d9a04f63668b9354d78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga746b538e1586c8aa4d53815c0ccad9a7"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c7mlog.html#ga746b538e1586c8aa4d53815c0ccad9a7">c7_mlog_hint</a> (<a class="el" href="group__c7mlog.html#gae3435b61d298e3eee6dd52f8fa896ada">c7_mlog_t</a> mlog)</td></tr>
<tr class="memdesc:ga746b538e1586c8aa4d53815c0ccad9a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">mlog のヒント情報を得る。  <a href="#ga746b538e1586c8aa4d53815c0ccad9a7">More...</a><br /></td></tr>
<tr class="separator:ga746b538e1586c8aa4d53815c0ccad9a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2f24f45fb9e63bd71020c732c99e2741"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__c7types.html#ga32dffe853a91b70665fd4c3b18a9d288">c7_bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c7mlog.html#ga2f24f45fb9e63bd71020c732c99e2741">c7_mlog_mutex</a> (<a class="el" href="group__c7mlog.html#gae3435b61d298e3eee6dd52f8fa896ada">c7_mlog_t</a> mlog, pthread_mutex_t *mutex_op)</td></tr>
<tr class="memdesc:ga2f24f45fb9e63bd71020c732c99e2741"><td class="mdescLeft">&#160;</td><td class="mdescRight">mlogへの書き込みアクセスを pthread_mutex_t で排他制御する。  <a href="#ga2f24f45fb9e63bd71020c732c99e2741">More...</a><br /></td></tr>
<tr class="separator:ga2f24f45fb9e63bd71020c732c99e2741"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga501eb14131b0afde3d2f5175e6e83c61"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__c7types.html#ga32dffe853a91b70665fd4c3b18a9d288">c7_bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c7mlog.html#ga501eb14131b0afde3d2f5175e6e83c61">c7_mlog_advlock</a> (<a class="el" href="group__c7mlog.html#gae3435b61d298e3eee6dd52f8fa896ada">c7_mlog_t</a> mlog)</td></tr>
<tr class="memdesc:ga501eb14131b0afde3d2f5175e6e83c61"><td class="mdescLeft">&#160;</td><td class="mdescRight">mlogへの書き込みアクセスをアドバイザイリロックで排他制御する。  <a href="#ga501eb14131b0afde3d2f5175e6e83c61">More...</a><br /></td></tr>
<tr class="separator:ga501eb14131b0afde3d2f5175e6e83c61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3413eb3a637fe88d95a0cfc22c5eb983"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__c7types.html#ga32dffe853a91b70665fd4c3b18a9d288">c7_bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c7mlog.html#ga3413eb3a637fe88d95a0cfc22c5eb983">c7_mlog_has_lock</a> (<a class="el" href="group__c7mlog.html#gae3435b61d298e3eee6dd52f8fa896ada">c7_mlog_t</a> mlog)</td></tr>
<tr class="memdesc:ga3413eb3a637fe88d95a0cfc22c5eb983"><td class="mdescLeft">&#160;</td><td class="mdescRight">mlog への書き込みアクセスが排他制御されているか調べる。  <a href="#ga3413eb3a637fe88d95a0cfc22c5eb983">More...</a><br /></td></tr>
<tr class="separator:ga3413eb3a637fe88d95a0cfc22c5eb983"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7195c642850be0042370b66c9c17d2b8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__c7types.html#ga32dffe853a91b70665fd4c3b18a9d288">c7_bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c7mlog.html#ga7195c642850be0042370b66c9c17d2b8">c7_mlog_put</a> (<a class="el" href="group__c7mlog.html#gae3435b61d298e3eee6dd52f8fa896ada">c7_mlog_t</a> mlog, <a class="el" href="group__c7types.html#ga96c2ceb3c14d78749990504fa9d8d373">c7_time_t</a> time_us, uint32_t level, uint32_t categroy, uint64_t minidata, const char *src_name, int src_line, const void *logaddr, size_t logsize_b)</td></tr>
<tr class="memdesc:ga7195c642850be0042370b66c9c17d2b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">mlog へ記録する。  <a href="#ga7195c642850be0042370b66c9c17d2b8">More...</a><br /></td></tr>
<tr class="separator:ga7195c642850be0042370b66c9c17d2b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad08c021f3c5074f45d70fddddf2024ed"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__c7types.html#ga32dffe853a91b70665fd4c3b18a9d288">c7_bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c7mlog.html#gad08c021f3c5074f45d70fddddf2024ed">c7_mlog_pfx</a> (<a class="el" href="group__c7mlog.html#gae3435b61d298e3eee6dd52f8fa896ada">c7_mlog_t</a> mlog, <a class="el" href="group__c7types.html#ga96c2ceb3c14d78749990504fa9d8d373">c7_time_t</a> time_us, uint32_t level, uint32_t categroy, uint64_t minidata, const char *src_name, int src_line, const char *format,...)</td></tr>
<tr class="memdesc:gad08c021f3c5074f45d70fddddf2024ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">printf(3)の形式で mlog へ記録する。  <a href="#gad08c021f3c5074f45d70fddddf2024ed">More...</a><br /></td></tr>
<tr class="separator:gad08c021f3c5074f45d70fddddf2024ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1f854e8f30d318e67584e1b2bcd9906b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__c7types.html#ga32dffe853a91b70665fd4c3b18a9d288">c7_bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c7mlog.html#ga1f854e8f30d318e67584e1b2bcd9906b">c7_mlog_vpfx</a> (<a class="el" href="group__c7mlog.html#gae3435b61d298e3eee6dd52f8fa896ada">c7_mlog_t</a> mlog, <a class="el" href="group__c7types.html#ga96c2ceb3c14d78749990504fa9d8d373">c7_time_t</a> time_us, uint32_t level, uint32_t categroy, uint64_t minidata, const char *src_name, int src_line, const char *format, va_list ap)</td></tr>
<tr class="memdesc:ga1f854e8f30d318e67584e1b2bcd9906b"><td class="mdescLeft">&#160;</td><td class="mdescRight">vprintf(3)の形式で mlog へ記録する。  <a href="#ga1f854e8f30d318e67584e1b2bcd9906b">More...</a><br /></td></tr>
<tr class="separator:ga1f854e8f30d318e67584e1b2bcd9906b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad38ea70e2b89838b1870402bfa0060cd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__c7types.html#ga32dffe853a91b70665fd4c3b18a9d288">c7_bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c7mlog.html#gad38ea70e2b89838b1870402bfa0060cd">c7_mlog_pfc</a> (<a class="el" href="group__c7mlog.html#gae3435b61d298e3eee6dd52f8fa896ada">c7_mlog_t</a> mlog, uint32_t level, uint32_t categroy, const char *format,...)</td></tr>
<tr class="memdesc:gad38ea70e2b89838b1870402bfa0060cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">ログレベルとカテゴリーは明示的引数とする <a class="el" href="group__c7mlog.html#gad08c021f3c5074f45d70fddddf2024ed" title="printf(3)の形式で mlog へ記録する。">c7_mlog_pfx()</a> の簡易版。  <a href="#gad38ea70e2b89838b1870402bfa0060cd">More...</a><br /></td></tr>
<tr class="separator:gad38ea70e2b89838b1870402bfa0060cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabd783f9071a37d9e6a9200ef2fa21c71"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__c7types.html#ga32dffe853a91b70665fd4c3b18a9d288">c7_bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c7mlog.html#gabd783f9071a37d9e6a9200ef2fa21c71">c7_mlog_pf</a> (<a class="el" href="group__c7mlog.html#gae3435b61d298e3eee6dd52f8fa896ada">c7_mlog_t</a> mlog, uint32_t level, const char *format,...)</td></tr>
<tr class="memdesc:gabd783f9071a37d9e6a9200ef2fa21c71"><td class="mdescLeft">&#160;</td><td class="mdescRight">ログレベルは明示的引数とする <a class="el" href="group__c7mlog.html#gad08c021f3c5074f45d70fddddf2024ed" title="printf(3)の形式で mlog へ記録する。">c7_mlog_pfx()</a> の簡易版。  <a href="#gabd783f9071a37d9e6a9200ef2fa21c71">More...</a><br /></td></tr>
<tr class="separator:gabd783f9071a37d9e6a9200ef2fa21c71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8a5ba1ad3b3dceaac8b1e82995c41b59"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__c7mlog.html#gae3435b61d298e3eee6dd52f8fa896ada">c7_mlog_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c7mlog.html#ga8a5ba1ad3b3dceaac8b1e82995c41b59">c7_mlog_open_r</a> (const char *name)</td></tr>
<tr class="memdesc:ga8a5ba1ad3b3dceaac8b1e82995c41b59"><td class="mdescLeft">&#160;</td><td class="mdescRight">mlogを読み込み用として初期化する。  <a href="#ga8a5ba1ad3b3dceaac8b1e82995c41b59">More...</a><br /></td></tr>
<tr class="separator:ga8a5ba1ad3b3dceaac8b1e82995c41b59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8dd9176bbda31d82ed3897541311cfb7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__c7types.html#ga32dffe853a91b70665fd4c3b18a9d288">c7_bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c7mlog.html#ga8dd9176bbda31d82ed3897541311cfb7">c7_mlog_scan</a> (<a class="el" href="group__c7mlog.html#gae3435b61d298e3eee6dd52f8fa896ada">c7_mlog_t</a> mlog, size_t maxcount, uint32_t order_min, <a class="el" href="group__c7types.html#ga96c2ceb3c14d78749990504fa9d8d373">c7_time_t</a> time_us_min, <a class="el" href="group__c7types.html#ga32dffe853a91b70665fd4c3b18a9d288">c7_bool_t</a>(*choice)(const <a class="el" href="group__c7mlog.html#structc7__mlog__info__t">c7_mlog_info_t</a> *info, void *__param), <a class="el" href="group__c7types.html#ga32dffe853a91b70665fd4c3b18a9d288">c7_bool_t</a>(*access)(const <a class="el" href="group__c7mlog.html#structc7__mlog__info__t">c7_mlog_info_t</a> *info, void *data, void *__param), void *__param)</td></tr>
<tr class="memdesc:ga8dd9176bbda31d82ed3897541311cfb7"><td class="mdescLeft">&#160;</td><td class="mdescRight">読み込み用にオープンされた mlog の記録内容を走査する。  <a href="#ga8dd9176bbda31d82ed3897541311cfb7">More...</a><br /></td></tr>
<tr class="separator:ga8dd9176bbda31d82ed3897541311cfb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9dd549db5192c6a171f47f0761be40be"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c7mlog.html#ga9dd549db5192c6a171f47f0761be40be">c7_mlog_close</a> (<a class="el" href="group__c7mlog.html#gae3435b61d298e3eee6dd52f8fa896ada">c7_mlog_t</a> mlog)</td></tr>
<tr class="memdesc:ga9dd549db5192c6a171f47f0761be40be"><td class="mdescLeft">&#160;</td><td class="mdescRight">mlogをクローズする。  <a href="#ga9dd549db5192c6a171f47f0761be40be">More...</a><br /></td></tr>
<tr class="separator:ga9dd549db5192c6a171f47f0761be40be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7cc29be05abfa356be07e3bd8be6be95"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__c7types.html#ga32dffe853a91b70665fd4c3b18a9d288">c7_bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c7mlog.html#ga7cc29be05abfa356be07e3bd8be6be95">c7_mlog_clear</a> (const char *name)</td></tr>
<tr class="memdesc:ga7cc29be05abfa356be07e3bd8be6be95"><td class="mdescLeft">&#160;</td><td class="mdescRight">mlogファイルの記録をクリアする。  <a href="#ga7cc29be05abfa356be07e3bd8be6be95">More...</a><br /></td></tr>
<tr class="separator:ga7cc29be05abfa356be07e3bd8be6be95"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>mmap領域に記録するデバッグログ機能 </p>
<hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="structc7__mlog__info__t" id="structc7__mlog__info__t"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structc7__mlog__info__t">&#9670;&nbsp;</a></span>c7_mlog_info_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct c7_mlog_info_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>mlog から取り出した記録単位毎の各種情報。 </p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="a709deb0fd7ce3d91463dd3a4d90387a9"></a>const char *</td>
<td class="fieldname">
thread_name</td>
<td class="fielddoc">
スレッド名。 </td></tr>
<tr><td class="fieldtype">
<a id="aafaf744e8060eaadc6634ea3dd75895a"></a>uint64_t</td>
<td class="fieldname">
thread_id</td>
<td class="fielddoc">
c7thread機能でのスレッドID。 </td></tr>
<tr><td class="fieldtype">
<a id="abb20206145bf55a33bee26033a25fbb4"></a>const char *</td>
<td class="fieldname">
source_name</td>
<td class="fielddoc">
記録関数を呼び出したソースファイル名。 </td></tr>
<tr><td class="fieldtype">
<a id="a20726c37a3faf65842d18ede53a5db7c"></a>int</td>
<td class="fieldname">
source_line</td>
<td class="fielddoc">
同行番号。 </td></tr>
<tr><td class="fieldtype">
<a id="aa9e5f1e0c0c22b4b6544bd63c009b39c"></a>uint32_t</td>
<td class="fieldname">
order</td>
<td class="fielddoc">
ファイル単位での記録のシリアル番号。 </td></tr>
<tr><td class="fieldtype">
<a id="a6b6c0e0954bb8e924cca6a538eb35892"></a>int32_t</td>
<td class="fieldname">
size_b</td>
<td class="fielddoc">
記録データのバイト数 </td></tr>
<tr><td class="fieldtype">
<a id="af59c85fcb03f3c5ca37166ed95e55fab"></a><a class="el" href="group__c7types.html#ga96c2ceb3c14d78749990504fa9d8d373">c7_time_t</a></td>
<td class="fieldname">
time_us</td>
<td class="fielddoc">
マイクロ秒単位でのタイムスタンプ </td></tr>
<tr><td class="fieldtype">
<a id="a8996bd6de3c0b96f3c7e190805455455"></a>uint32_t</td>
<td class="fieldname">
level</td>
<td class="fielddoc">
ログレベル (c7types.h の C7_LOG_xxx) </td></tr>
<tr><td class="fieldtype">
<a id="a72db0a8d2afccf5f848802d8ff893426"></a>uint32_t</td>
<td class="fieldname">
category</td>
<td class="fielddoc">
ログカテゴリ </td></tr>
<tr><td class="fieldtype">
<a id="a092cef3054f25b18097d3eced7384062"></a>uint64_t</td>
<td class="fieldname">
minidata</td>
<td class="fielddoc">
64bit分のアプリケーション任意データ </td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga5c763b951b30315e94a638ae0ad2e966"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5c763b951b30315e94a638ae0ad2e966">&#9670;&nbsp;</a></span>c7mlog</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define c7mlog</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">g, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">v, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">(void)((C7_LOG_##v &lt;= <a class="code" href="group__c7dconf.html#gae39242082f467aba612d7056700a4be4">c7_dconf_i</a>(<a class="code" href="group__c7dconf.html#gga06fc87d81c62e9abb8790b6e5713c55ba78f0eaf26c0437b066af39dcc19f0bec">C7_DCONF_MLOG</a>)) ? \</div><div class="line">                                               c7_mlog_pf((g), C7_LOG_##v, __VA_ARGS__) : 0)</div><div class="ttc" id="group__c7dconf_html_gae39242082f467aba612d7056700a4be4"><div class="ttname"><a href="group__c7dconf.html#gae39242082f467aba612d7056700a4be4">c7_dconf_i</a></div><div class="ttdeci">int64_t c7_dconf_i(int index)</div><div class="ttdoc">dconf の index の値を整数として得る。</div></div>
<div class="ttc" id="group__c7dconf_html_gga06fc87d81c62e9abb8790b6e5713c55ba78f0eaf26c0437b066af39dcc19f0bec"><div class="ttname"><a href="group__c7dconf.html#gga06fc87d81c62e9abb8790b6e5713c55ba78f0eaf26c0437b066af39dcc19f0bec">C7_DCONF_MLOG</a></div><div class="ttdoc">mlog記録レベル</div><div class="ttdef"><b>Definition:</b> c7dconf.dox:56</div></div>
</div><!-- fragment -->
<p>dconf の C7_DCONF_MLOG の設定からログレベルによる記録の抑制を行うマクロ。 ログレベル v には C7_LOG_xxx の xxx のみを指定する。 </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gadcf62288ff8d0a75454a2e0bdd3dbfbe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadcf62288ff8d0a75454a2e0bdd3dbfbe">&#9670;&nbsp;</a></span>c7_mlog_open_w()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__c7mlog.html#gae3435b61d298e3eee6dd52f8fa896ada">c7_mlog_t</a> c7_mlog_open_w </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>hdrsize_b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>logsize_b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>hint_op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>mlogを書き込みモードでオープンする。 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>オープンする mlog の名称。これは、環境変数名 "C7_MLOG_DIR"、サフィクス ".mlog" とともに、 <a class="el" href="group__c7file.html#ga7cff6ce94d1b999eef932fc745b76748" title="[libc7ライブラリ向け] 特殊ファイルのパス名を決定する。">c7_file_special_path()</a> に渡されて実際のパス名への変換される。 </td></tr>
    <tr><td class="paramname">hdrsize_b</td><td>ヘッダー部分のアプリケーションで使用したい記録エリアのサイズ(bytes)。 この領域は <a class="el" href="group__c7mlog.html#ga767749dadbd65d9a04f63668b9354d78" title="mlogのアプリケーションエリアのアドレスを得る。">c7_mlog_hdraddr()</a> で得ることができる。 </td></tr>
    <tr><td class="paramname">logsize_b</td><td>ログ記録エリアのサイズ(bytes)。1KB未満や1GBを越えるとエラーとなる。 </td></tr>
    <tr><td class="paramname">hint_op</td><td>ヒント情報。null終端文字を入れて 64 バイト以下でなければならない。 現バージョンでは意味をもたないので NULL を指定すべき。 </td></tr>
    <tr><td class="paramname">flags</td><td>C7_MLOG_F_xxx 論理和を指定する。 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>mlogファイルを正常にmmapできれば mlogオブジェクトを戻す。そうでなれば NULL を戻す。</dd></dl>
<p><a class="el" href="group__c7file.html#ga7cff6ce94d1b999eef932fc745b76748" title="[libc7ライブラリ向け] 特殊ファイルのパス名を決定する。">c7_file_special_path()</a> でファイルをオープンし、必要なサイズまで ftruncate して mmap する。</p><ul>
<li>ファイルが既存だった場合、内部のフォーマットのリビジョン番号や hdrsize_b, logsize_b が ファイルのものと異っていた場合は新しい値でリセットされる。記録内容も空の状態にリセットされる。</li>
<li>rootアカウントで動作している場合、ファイルの所有者はファイルのディレクトリの所有者に強制的に chown(2) される。 </li>
</ul>

</div>
</div>
<a id="ga767749dadbd65d9a04f63668b9354d78"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga767749dadbd65d9a04f63668b9354d78">&#9670;&nbsp;</a></span>c7_mlog_hdraddr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* c7_mlog_hdraddr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__c7mlog.html#gae3435b61d298e3eee6dd52f8fa896ada">c7_mlog_t</a>&#160;</td>
          <td class="paramname"><em>mlog</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>hdrsize_b_op</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>mlogのアプリケーションエリアのアドレスを得る。 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mlog</td><td>mlogオブジェクト。 </td></tr>
    <tr><td class="paramname">hdrsize_b_op</td><td>NULLでなければ、c7_mlog_open_w() の logsize_b で指定した値が戻される。 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>アプリケーションエリアのアドレスを戻す。 </dd></dl>

</div>
</div>
<a id="ga746b538e1586c8aa4d53815c0ccad9a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga746b538e1586c8aa4d53815c0ccad9a7">&#9670;&nbsp;</a></span>c7_mlog_hint()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* c7_mlog_hint </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__c7mlog.html#gae3435b61d298e3eee6dd52f8fa896ada">c7_mlog_t</a>&#160;</td>
          <td class="paramname"><em>mlog</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>mlog のヒント情報を得る。 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mlog</td><td>mlogオブジェクト。 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__c7mlog.html#gadcf62288ff8d0a75454a2e0bdd3dbfbe" title="mlogを書き込みモードでオープンする。">c7_mlog_open_w()</a> の hint_op に指定した文字列を戻す。 </dd></dl>

</div>
</div>
<a id="ga2f24f45fb9e63bd71020c732c99e2741"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2f24f45fb9e63bd71020c732c99e2741">&#9670;&nbsp;</a></span>c7_mlog_mutex()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__c7types.html#ga32dffe853a91b70665fd4c3b18a9d288">c7_bool_t</a> c7_mlog_mutex </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__c7mlog.html#gae3435b61d298e3eee6dd52f8fa896ada">c7_mlog_t</a>&#160;</td>
          <td class="paramname"><em>mlog</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pthread_mutex_t *&#160;</td>
          <td class="paramname"><em>mutex_op</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>mlogへの書き込みアクセスを pthread_mutex_t で排他制御する。 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mlog</td><td>mlogオブジェクト。 </td></tr>
    <tr><td class="paramname">mutex_op</td><td>pthread の mutex オブジェクト。NULLの場合は関数内で確保する。 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ロックの初期化に成功すれば C7_TRUE を戻し、失敗すれば C7_FALSE を戻す。 既に排他制御が設定されていると失敗となる。 </dd></dl>

</div>
</div>
<a id="ga501eb14131b0afde3d2f5175e6e83c61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga501eb14131b0afde3d2f5175e6e83c61">&#9670;&nbsp;</a></span>c7_mlog_advlock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__c7types.html#ga32dffe853a91b70665fd4c3b18a9d288">c7_bool_t</a> c7_mlog_advlock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__c7mlog.html#gae3435b61d298e3eee6dd52f8fa896ada">c7_mlog_t</a>&#160;</td>
          <td class="paramname"><em>mlog</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>mlogへの書き込みアクセスをアドバイザイリロックで排他制御する。 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mlog</td><td>mlogオブジェクト。 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ロックの初期化に成功すれば C7_TRUE を戻し、失敗すれば C7_FALSE を戻す。 既に排他制御が設定されていると失敗となる。 </dd></dl>

</div>
</div>
<a id="ga3413eb3a637fe88d95a0cfc22c5eb983"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3413eb3a637fe88d95a0cfc22c5eb983">&#9670;&nbsp;</a></span>c7_mlog_has_lock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__c7types.html#ga32dffe853a91b70665fd4c3b18a9d288">c7_bool_t</a> c7_mlog_has_lock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__c7mlog.html#gae3435b61d298e3eee6dd52f8fa896ada">c7_mlog_t</a>&#160;</td>
          <td class="paramname"><em>mlog</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>mlog への書き込みアクセスが排他制御されているか調べる。 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mlog</td><td>mlogオブジェクト。 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>排他制御されていれば C7_TRUE を、そうでなければ C7_FALSE を戻す。 </dd></dl>

</div>
</div>
<a id="ga7195c642850be0042370b66c9c17d2b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7195c642850be0042370b66c9c17d2b8">&#9670;&nbsp;</a></span>c7_mlog_put()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__c7types.html#ga32dffe853a91b70665fd4c3b18a9d288">c7_bool_t</a> c7_mlog_put </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__c7mlog.html#gae3435b61d298e3eee6dd52f8fa896ada">c7_mlog_t</a>&#160;</td>
          <td class="paramname"><em>mlog</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__c7types.html#ga96c2ceb3c14d78749990504fa9d8d373">c7_time_t</a>&#160;</td>
          <td class="paramname"><em>time_us</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>categroy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>minidata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>src_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>src_line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>logaddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>logsize_b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>mlog へ記録する。 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mlog</td><td>mlogオブジェクト。 </td></tr>
    <tr><td class="paramname">time_us</td><td>マイクロ秒単位の時刻データ。C7_MLOG_AUTO_TIME が指定されていれば、この関数で時刻を得る。 </td></tr>
    <tr><td class="paramname">level</td><td>ログレベル(c7types.h の C7_LOG_xxx)。 この値が dconf の <a class="el" href="group__c7dconf.html#gga06fc87d81c62e9abb8790b6e5713c55ba78f0eaf26c0437b066af39dcc19f0bec" title="mlog記録レベル">C7_DCONF_MLOG</a> インデックスの値より大きいとログファイルに記録されない。 この dconf の値のデフォルト値は <a class="el" href="group__c7types.html#ga736fb6f6b92fd859d156e5408a30334f" title="簡潔な追加情報">C7_LOG_BRF</a> (==4) である。 プログラムで独自の dconf を初期化していない場合、この設定値を変更する方法は C7_DCONF_MLOG という環境変数を定義することである。 </td></tr>
    <tr><td class="paramname">categroy</td><td>ログカテゴリ。 </td></tr>
    <tr><td class="paramname">minidata</td><td>64bit分のアプリケーション任意データ。 </td></tr>
    <tr><td class="paramname">src_name</td><td>ソースファイルのパス名。記録の必要のない場は <a class="el" href="group__c7mlog.html#gadcf62288ff8d0a75454a2e0bdd3dbfbe" title="mlogを書き込みモードでオープンする。">c7_mlog_open_w()</a> の flags の指定にかかわらず NULLで構わない。 逆に flags に C7_MLOG_F_SOURCE_NAME が指定されてなければ、この引数が NULL でなくても記録されない。 この名前のファイル名部分のみが記録される。 </td></tr>
    <tr><td class="paramname">src_line</td><td>ソースファイルの行番号。 </td></tr>
    <tr><td class="paramname">logaddr</td><td>記録したいデータのアドレス。 </td></tr>
    <tr><td class="paramname">logsize_b</td><td>記録したいデータのバイト数。ここに -1UL を指定すると、logaddr がC規格の文字列を指すものとして、 strlen(logaddr)+1 を logsize_b とする。</td></tr>
  </table>
  </dd>
</dl>
<p>正常に記録できれば C7_TRUE を戻す。logsize_b が記録エリアに対して大きすぎる場合はエラーとなり C7_FALSE を戻す。 </p>

</div>
</div>
<a id="gad08c021f3c5074f45d70fddddf2024ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad08c021f3c5074f45d70fddddf2024ed">&#9670;&nbsp;</a></span>c7_mlog_pfx()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__c7types.html#ga32dffe853a91b70665fd4c3b18a9d288">c7_bool_t</a> c7_mlog_pfx </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__c7mlog.html#gae3435b61d298e3eee6dd52f8fa896ada">c7_mlog_t</a>&#160;</td>
          <td class="paramname"><em>mlog</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__c7types.html#ga96c2ceb3c14d78749990504fa9d8d373">c7_time_t</a>&#160;</td>
          <td class="paramname"><em>time_us</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>categroy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>minidata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>src_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>src_line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>printf(3)の形式で mlog へ記録する。 </p>
<p>format 以降の引数から logaddr と logisize_b を得て <a class="el" href="group__c7mlog.html#ga7195c642850be0042370b66c9c17d2b8" title="mlog へ記録する。">c7_mlog_put()</a> を呼ぶ。 </p>

</div>
</div>
<a id="ga1f854e8f30d318e67584e1b2bcd9906b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1f854e8f30d318e67584e1b2bcd9906b">&#9670;&nbsp;</a></span>c7_mlog_vpfx()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__c7types.html#ga32dffe853a91b70665fd4c3b18a9d288">c7_bool_t</a> c7_mlog_vpfx </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__c7mlog.html#gae3435b61d298e3eee6dd52f8fa896ada">c7_mlog_t</a>&#160;</td>
          <td class="paramname"><em>mlog</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__c7types.html#ga96c2ceb3c14d78749990504fa9d8d373">c7_time_t</a>&#160;</td>
          <td class="paramname"><em>time_us</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>categroy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>minidata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>src_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>src_line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">va_list&#160;</td>
          <td class="paramname"><em>ap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>vprintf(3)の形式で mlog へ記録する。 </p>
<p>format と ap から logaddr と logisize_b を得て <a class="el" href="group__c7mlog.html#ga7195c642850be0042370b66c9c17d2b8" title="mlog へ記録する。">c7_mlog_put()</a> を呼ぶ。 </p>

</div>
</div>
<a id="gad38ea70e2b89838b1870402bfa0060cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad38ea70e2b89838b1870402bfa0060cd">&#9670;&nbsp;</a></span>c7_mlog_pfc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__c7types.html#ga32dffe853a91b70665fd4c3b18a9d288">c7_bool_t</a> c7_mlog_pfc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__c7mlog.html#gae3435b61d298e3eee6dd52f8fa896ada">c7_mlog_t</a>&#160;</td>
          <td class="paramname"><em>mlog</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>categroy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ログレベルとカテゴリーは明示的引数とする <a class="el" href="group__c7mlog.html#gad08c021f3c5074f45d70fddddf2024ed" title="printf(3)の形式で mlog へ記録する。">c7_mlog_pfx()</a> の簡易版。 </p>
<p>c7_mlog_pfx(mlog, C7_MLOG_AUTO_TIME, level, categroy, 0, <b>FILE</b>, <b>LINE</b>, format, ...) と等価。 </p>

</div>
</div>
<a id="gabd783f9071a37d9e6a9200ef2fa21c71"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabd783f9071a37d9e6a9200ef2fa21c71">&#9670;&nbsp;</a></span>c7_mlog_pf()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__c7types.html#ga32dffe853a91b70665fd4c3b18a9d288">c7_bool_t</a> c7_mlog_pf </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__c7mlog.html#gae3435b61d298e3eee6dd52f8fa896ada">c7_mlog_t</a>&#160;</td>
          <td class="paramname"><em>mlog</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ログレベルは明示的引数とする <a class="el" href="group__c7mlog.html#gad08c021f3c5074f45d70fddddf2024ed" title="printf(3)の形式で mlog へ記録する。">c7_mlog_pfx()</a> の簡易版。 </p>
<p>c7_mlog_pfx(mlog, C7_MLOG_AUTO_TIME, level, 0, 0, <b>FILE</b>, <b>LINE</b>, format, ...) と等価。 </p>

</div>
</div>
<a id="ga8a5ba1ad3b3dceaac8b1e82995c41b59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8a5ba1ad3b3dceaac8b1e82995c41b59">&#9670;&nbsp;</a></span>c7_mlog_open_r()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__c7mlog.html#gae3435b61d298e3eee6dd52f8fa896ada">c7_mlog_t</a> c7_mlog_open_r </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>mlogを読み込み用として初期化する。 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>オープンする mlog の名称。これは、環境変数名 "C7_MLOG_DIR"、サフィクス ".mlog" とともに、 <a class="el" href="group__c7file.html#ga7cff6ce94d1b999eef932fc745b76748" title="[libc7ライブラリ向け] 特殊ファイルのパス名を決定する。">c7_file_special_path()</a> に渡されて実際のパス名への変換される。 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>正常に初期化できれば mlogオブジェクトを戻し、失敗すれば NULL を戻す。 </dd></dl>

</div>
</div>
<a id="ga8dd9176bbda31d82ed3897541311cfb7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8dd9176bbda31d82ed3897541311cfb7">&#9670;&nbsp;</a></span>c7_mlog_scan()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__c7types.html#ga32dffe853a91b70665fd4c3b18a9d288">c7_bool_t</a> c7_mlog_scan </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__c7mlog.html#gae3435b61d298e3eee6dd52f8fa896ada">c7_mlog_t</a>&#160;</td>
          <td class="paramname"><em>mlog</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>maxcount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>order_min</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__c7types.html#ga96c2ceb3c14d78749990504fa9d8d373">c7_time_t</a>&#160;</td>
          <td class="paramname"><em>time_us_min</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__c7types.html#ga32dffe853a91b70665fd4c3b18a9d288">c7_bool_t</a>(*)(const <a class="el" href="group__c7mlog.html#structc7__mlog__info__t">c7_mlog_info_t</a> *info, void *__param)&#160;</td>
          <td class="paramname"><em>choice</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__c7types.html#ga32dffe853a91b70665fd4c3b18a9d288">c7_bool_t</a>(*)(const <a class="el" href="group__c7mlog.html#structc7__mlog__info__t">c7_mlog_info_t</a> *info, void *data, void *__param)&#160;</td>
          <td class="paramname"><em>access</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>__param</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>読み込み用にオープンされた mlog の記録内容を走査する。 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mlog</td><td><a class="el" href="group__c7mlog.html#ga8a5ba1ad3b3dceaac8b1e82995c41b59" title="mlogを読み込み用として初期化する。">c7_mlog_open_r()</a>でオープンした mlog オブジェクト。 </td></tr>
    <tr><td class="paramname">maxcount</td><td>最大でアクセスする記録数。 </td></tr>
    <tr><td class="paramname">order_min</td><td>シーケンス番号がこの値以上の記録にのみアクセスする。 </td></tr>
    <tr><td class="paramname">time_us_min</td><td>タイムスタンプ値がこの値以上の記録にのみアクセスする。 </td></tr>
    <tr><td class="paramname">choice</td><td>記録の選択関数を指定する。NULLを指定した場合は全ての記録が選択される。 </td></tr>
    <tr><td class="paramname">access</td><td>maxcount, order_min, time_us_min, choice() で選択された記録にアクセスする関数。 </td></tr>
    <tr><td class="paramname">__param</td><td>choise() や access() に渡すパラメータ。 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>
<dl class="section note"><dt>Note</dt><dd>c7mlogコマンドもこの関数で実装されている。 </dd></dl>

</div>
</div>
<a id="ga9dd549db5192c6a171f47f0761be40be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9dd549db5192c6a171f47f0761be40be">&#9670;&nbsp;</a></span>c7_mlog_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void c7_mlog_close </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__c7mlog.html#gae3435b61d298e3eee6dd52f8fa896ada">c7_mlog_t</a>&#160;</td>
          <td class="paramname"><em>mlog</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>mlogをクローズする。 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mlog</td><td>mlogオブジェクト。 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga7cc29be05abfa356be07e3bd8be6be95"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7cc29be05abfa356be07e3bd8be6be95">&#9670;&nbsp;</a></span>c7_mlog_clear()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__c7types.html#ga32dffe853a91b70665fd4c3b18a9d288">c7_bool_t</a> c7_mlog_clear </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>mlogファイルの記録をクリアする。 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>操作対象となる mlog の名称。これは、環境変数名 "C7_MLOG_DIR"、サフィクス ".mlog" とともに、 <a class="el" href="group__c7file.html#ga7cff6ce94d1b999eef932fc745b76748" title="[libc7ライブラリ向け] 特殊ファイルのパス名を決定する。">c7_file_special_path()</a> に渡されて実際のパス名への変換される。 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>mlogファイルの記録をクリアできれば C7_TRUE を、そうでなければ C7_FALSE を戻す。 </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
