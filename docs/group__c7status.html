<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libc7: c7status.h</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libc7
   &#160;<span id="projectnumber">r0.1.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a>  </div>
  <div class="headertitle">
<div class="title">c7status.h</div>  </div>
</div><!--header-->
<div class="contents">

<p>ステータス情報などを保存する。  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:structc7__status__def__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c7status.html#structc7__status__def__t">c7_status_def_t</a></td></tr>
<tr class="memdesc:structc7__status__def__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">ステータスコードの文字列化情報。  <a href="group__c7status.html#structc7__status__def__t">More...</a><br /></td></tr>
<tr class="separator:structc7__status__def__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:structc7__status__catalog__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c7status.html#structc7__status__catalog__t">c7_status_catalog_t</a></td></tr>
<tr class="memdesc:structc7__status__catalog__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">ステータスコードのカタログ。  <a href="group__c7status.html#structc7__status__catalog__t">More...</a><br /></td></tr>
<tr class="separator:structc7__status__catalog__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
ステータスコード</h2></td></tr>
<tr class="memitem:ga708d256a331017df499e3e945133434b"><td class="memItemLeft" align="right" valign="top"><a id="ga708d256a331017df499e3e945133434b"></a>
typedef uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c7status.html#ga708d256a331017df499e3e945133434b">c7_status_t</a></td></tr>
<tr class="memdesc:ga708d256a331017df499e3e945133434b"><td class="mdescLeft">&#160;</td><td class="mdescRight">ステータスコードの型。 <br /></td></tr>
<tr class="separator:ga708d256a331017df499e3e945133434b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9be1b5bb4b2081cb935cbb135b7e44d6"><td class="memItemLeft" align="right" valign="top"><a id="ga9be1b5bb4b2081cb935cbb135b7e44d6"></a>
<a class="el" href="group__c7status.html#ga708d256a331017df499e3e945133434b">c7_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c7status.html#ga9be1b5bb4b2081cb935cbb135b7e44d6">C7_STATUS</a> (<a class="el" href="group__c7status.html#ga708d256a331017df499e3e945133434b">c7_status_t</a> cat, <a class="el" href="group__c7status.html#ga708d256a331017df499e3e945133434b">c7_status_t</a> detail_in_cat)</td></tr>
<tr class="memdesc:ga9be1b5bb4b2081cb935cbb135b7e44d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">12bitのカテゴリーコードとカテゴリー内の15bitの詳細コードからステータスコードを得る。 <br /></td></tr>
<tr class="separator:ga9be1b5bb4b2081cb935cbb135b7e44d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga131b7a7c6a8036e0ace15bd34e0db2dc"><td class="memItemLeft" align="right" valign="top"><a id="ga131b7a7c6a8036e0ace15bd34e0db2dc"></a>
<a class="el" href="group__c7status.html#ga708d256a331017df499e3e945133434b">c7_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c7status.html#ga131b7a7c6a8036e0ace15bd34e0db2dc">C7_STATUS_OPT</a> (<a class="el" href="group__c7status.html#ga708d256a331017df499e3e945133434b">c7_status_t</a> statuss)</td></tr>
<tr class="memdesc:ga131b7a7c6a8036e0ace15bd34e0db2dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">ステータスコードから上位4ビットのオプションコードを取り出す。 <br /></td></tr>
<tr class="separator:ga131b7a7c6a8036e0ace15bd34e0db2dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0b049cbe68ce2797ba66b16e96825805"><td class="memItemLeft" align="right" valign="top"><a id="ga0b049cbe68ce2797ba66b16e96825805"></a>
<a class="el" href="group__c7status.html#ga708d256a331017df499e3e945133434b">c7_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c7status.html#ga0b049cbe68ce2797ba66b16e96825805">C7_STATUS_CAT</a> (<a class="el" href="group__c7status.html#ga708d256a331017df499e3e945133434b">c7_status_t</a> status)</td></tr>
<tr class="memdesc:ga0b049cbe68ce2797ba66b16e96825805"><td class="mdescLeft">&#160;</td><td class="mdescRight">ステータスコードから12bitのカテゴリーコードを取り出す。 <br /></td></tr>
<tr class="separator:ga0b049cbe68ce2797ba66b16e96825805"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadf50eccdacba18ae517138b559f61924"><td class="memItemLeft" align="right" valign="top"><a id="gadf50eccdacba18ae517138b559f61924"></a>
<a class="el" href="group__c7status.html#ga708d256a331017df499e3e945133434b">c7_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c7status.html#gadf50eccdacba18ae517138b559f61924">C7_STATUS_STS</a> (<a class="el" href="group__c7status.html#ga708d256a331017df499e3e945133434b">c7_status_t</a> status)</td></tr>
<tr class="memdesc:gadf50eccdacba18ae517138b559f61924"><td class="mdescLeft">&#160;</td><td class="mdescRight">ステータスコードから15bitの詳細コードを取り出す。 <br /></td></tr>
<tr class="separator:gadf50eccdacba18ae517138b559f61924"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaafb3010bd843dd28e5dae58e15bcb0d5"><td class="memItemLeft" align="right" valign="top"><a id="gaafb3010bd843dd28e5dae58e15bcb0d5"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c7status.html#gaafb3010bd843dd28e5dae58e15bcb0d5">C7_STATUS_CAT_LIBC</a></td></tr>
<tr class="memdesc:gaafb3010bd843dd28e5dae58e15bcb0d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">libc 用のカテゴリーコード。 <br /></td></tr>
<tr class="separator:gaafb3010bd843dd28e5dae58e15bcb0d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga20154bf4a2814bb51f57b87a2f68455b"><td class="memItemLeft" align="right" valign="top"><a id="ga20154bf4a2814bb51f57b87a2f68455b"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c7status.html#ga20154bf4a2814bb51f57b87a2f68455b">C7_STATUS_CAT_C7</a></td></tr>
<tr class="memdesc:ga20154bf4a2814bb51f57b87a2f68455b"><td class="mdescLeft">&#160;</td><td class="mdescRight">libc7 用のカテゴリーコード。 <br /></td></tr>
<tr class="separator:ga20154bf4a2814bb51f57b87a2f68455b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacb31198cda536964c11870557c84ac28"><td class="memItemLeft" align="right" valign="top"><a id="gacb31198cda536964c11870557c84ac28"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c7status.html#gacb31198cda536964c11870557c84ac28">C7_STATUS_CAT_USER_MIN</a></td></tr>
<tr class="memdesc:gacb31198cda536964c11870557c84ac28"><td class="mdescLeft">&#160;</td><td class="mdescRight">[利用者用]カテゴリーコードの最小値。 <br /></td></tr>
<tr class="separator:gacb31198cda536964c11870557c84ac28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa230be1ad431fa712a86b646c781fd7b"><td class="memItemLeft" align="right" valign="top"><a id="gaa230be1ad431fa712a86b646c781fd7b"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c7status.html#gaa230be1ad431fa712a86b646c781fd7b">C7_STATUS_CAT_USER_MAX</a></td></tr>
<tr class="memdesc:gaa230be1ad431fa712a86b646c781fd7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">[利用者用]カテゴリーコードの最大値。 <br /></td></tr>
<tr class="separator:gaa230be1ad431fa712a86b646c781fd7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga669dfae4fdea2e0e64d7760e684f21f6"><td class="memItemLeft" align="right" valign="top"><a id="ga669dfae4fdea2e0e64d7760e684f21f6"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c7status.html#ga669dfae4fdea2e0e64d7760e684f21f6">C7_STATUS_OPT_CLEAR</a></td></tr>
<tr class="memdesc:ga669dfae4fdea2e0e64d7760e684f21f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">libc7で使用するオプションコード。 <br /></td></tr>
<tr class="separator:ga669dfae4fdea2e0e64d7760e684f21f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5988bc6ebc2b66edb27d477a46783a0a"><td class="memItemLeft" align="right" valign="top"><a id="ga5988bc6ebc2b66edb27d477a46783a0a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c7status.html#ga5988bc6ebc2b66edb27d477a46783a0a">C7_STATUS_INVALID</a></td></tr>
<tr class="memdesc:ga5988bc6ebc2b66edb27d477a46783a0a"><td class="mdescLeft">&#160;</td><td class="mdescRight">有効なステータスコードでない事を示す値。 <br /></td></tr>
<tr class="separator:ga5988bc6ebc2b66edb27d477a46783a0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
ステータスコードのカタログ</h2></td></tr>
<tr class="memitem:ga94d49703aa8aa6475dd3ba76a5dca02e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c7status.html#ga94d49703aa8aa6475dd3ba76a5dca02e">c7_status_add_catalog</a> (<a class="el" href="group__c7status.html#structc7__status__catalog__t">c7_status_catalog_t</a> *cat)</td></tr>
<tr class="memdesc:ga94d49703aa8aa6475dd3ba76a5dca02e"><td class="mdescLeft">&#160;</td><td class="mdescRight">カタログを登録する。  <a href="#ga94d49703aa8aa6475dd3ba76a5dca02e">More...</a><br /></td></tr>
<tr class="separator:ga94d49703aa8aa6475dd3ba76a5dca02e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabae6aa29ed5dc2d87a8030eed64cdf28"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c7status.html#gabae6aa29ed5dc2d87a8030eed64cdf28">c7_status_add_convert</a> (<a class="el" href="group__c7string__strbuf.html#gaad0bbcb830057114f446d45e08ccf6f5">c7_str_t</a> *(*convert)(<a class="el" href="group__c7string__strbuf.html#gaad0bbcb830057114f446d45e08ccf6f5">c7_str_t</a> *sbp, <a class="el" href="group__c7status.html#ga708d256a331017df499e3e945133434b">c7_status_t</a> status, void *arg), void *arg)</td></tr>
<tr class="memdesc:gabae6aa29ed5dc2d87a8030eed64cdf28"><td class="mdescLeft">&#160;</td><td class="mdescRight">ステータスコードを文字列に変換するコンバータを登録する。  <a href="#gabae6aa29ed5dc2d87a8030eed64cdf28">More...</a><br /></td></tr>
<tr class="separator:gabae6aa29ed5dc2d87a8030eed64cdf28"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
ステータス情報の保存</h2></td></tr>
<tr class="memitem:gafe83b074822e47cfffec54e954c59d76"><td class="memItemLeft" align="right" valign="top">typedef struct c7_status_stack_t_&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c7status.html#gafe83b074822e47cfffec54e954c59d76">c7_status_stack_t</a></td></tr>
<tr class="memdesc:gafe83b074822e47cfffec54e954c59d76"><td class="mdescLeft">&#160;</td><td class="mdescRight">ステータス情報の保存エリアの型。  <a href="#gafe83b074822e47cfffec54e954c59d76">More...</a><br /></td></tr>
<tr class="separator:gafe83b074822e47cfffec54e954c59d76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac94f57f0ebde80d8919680d0e41d2f81"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c7status.html#gac94f57f0ebde80d8919680d0e41d2f81">c7_status_clear</a> (void)</td></tr>
<tr class="memdesc:gac94f57f0ebde80d8919680d0e41d2f81"><td class="mdescLeft">&#160;</td><td class="mdescRight">現スレッドのステータス情報をクリアする。  <a href="#gac94f57f0ebde80d8919680d0e41d2f81">More...</a><br /></td></tr>
<tr class="separator:gac94f57f0ebde80d8919680d0e41d2f81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaca877bc1b0adc56ba065883c6abc07e4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c7status.html#gaca877bc1b0adc56ba065883c6abc07e4">c7_status_save</a> (<a class="el" href="group__c7status.html#gafe83b074822e47cfffec54e954c59d76">c7_status_stack_t</a> *save)</td></tr>
<tr class="memdesc:gaca877bc1b0adc56ba065883c6abc07e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">現スレッドのステータス情報をコピーする。  <a href="#gaca877bc1b0adc56ba065883c6abc07e4">More...</a><br /></td></tr>
<tr class="separator:gaca877bc1b0adc56ba065883c6abc07e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8e8534371c906d4db768e411a2efcb66"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c7status.html#ga8e8534371c906d4db768e411a2efcb66">c7_status_saveclear</a> (<a class="el" href="group__c7status.html#gafe83b074822e47cfffec54e954c59d76">c7_status_stack_t</a> *save)</td></tr>
<tr class="memdesc:ga8e8534371c906d4db768e411a2efcb66"><td class="mdescLeft">&#160;</td><td class="mdescRight">現スレッドのステータス情報をコピー後クリアする。  <a href="#ga8e8534371c906d4db768e411a2efcb66">More...</a><br /></td></tr>
<tr class="separator:ga8e8534371c906d4db768e411a2efcb66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga81c6a3b8912c5789b636e108efb23fc0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c7status.html#ga81c6a3b8912c5789b636e108efb23fc0">c7_status_restore</a> (const <a class="el" href="group__c7status.html#gafe83b074822e47cfffec54e954c59d76">c7_status_stack_t</a> *saved)</td></tr>
<tr class="memdesc:ga81c6a3b8912c5789b636e108efb23fc0"><td class="mdescLeft">&#160;</td><td class="mdescRight">コピーされたステータス情報を現スレッドのステータス情報に書き戻す。  <a href="#ga81c6a3b8912c5789b636e108efb23fc0">More...</a><br /></td></tr>
<tr class="separator:ga81c6a3b8912c5789b636e108efb23fc0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8f081e437b82497de02ae0bebe4f8ab9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c7status.html#ga8f081e437b82497de02ae0bebe4f8ab9">c7_status_add</a> (<a class="el" href="group__c7status.html#ga708d256a331017df499e3e945133434b">c7_status_t</a> status, const char *fmt,...)</td></tr>
<tr class="memdesc:ga8f081e437b82497de02ae0bebe4f8ab9"><td class="mdescLeft">&#160;</td><td class="mdescRight">ステータス情報を追加する。  <a href="#ga8f081e437b82497de02ae0bebe4f8ab9">More...</a><br /></td></tr>
<tr class="separator:ga8f081e437b82497de02ae0bebe4f8ab9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4f57a4f5e86f0ef96c2e2a3439229d38"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c7status.html#ga4f57a4f5e86f0ef96c2e2a3439229d38">c7_status_add_va</a> (<a class="el" href="group__c7status.html#ga708d256a331017df499e3e945133434b">c7_status_t</a> status, const char *fmt, va_list ap)</td></tr>
<tr class="memdesc:ga4f57a4f5e86f0ef96c2e2a3439229d38"><td class="mdescLeft">&#160;</td><td class="mdescRight">ステータス情報を追加する。(va_list版)  <a href="#ga4f57a4f5e86f0ef96c2e2a3439229d38">More...</a><br /></td></tr>
<tr class="separator:ga4f57a4f5e86f0ef96c2e2a3439229d38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa67abfdfaf8e0d163305bdf8bab2c913"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c7status.html#gaa67abfdfaf8e0d163305bdf8bab2c913">c7_status_reset</a> (<a class="el" href="group__c7status.html#ga708d256a331017df499e3e945133434b">c7_status_t</a> status, const char *fmt,...)</td></tr>
<tr class="memdesc:gaa67abfdfaf8e0d163305bdf8bab2c913"><td class="mdescLeft">&#160;</td><td class="mdescRight">ステータス情報を再設定する。  <a href="#gaa67abfdfaf8e0d163305bdf8bab2c913">More...</a><br /></td></tr>
<tr class="separator:gaa67abfdfaf8e0d163305bdf8bab2c913"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacf9c7ad26943f00edb51d1a86141d46e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c7status.html#gacf9c7ad26943f00edb51d1a86141d46e">c7_status_reset_va</a> (<a class="el" href="group__c7status.html#ga708d256a331017df499e3e945133434b">c7_status_t</a> status, const char *fmt, va_list ap)</td></tr>
<tr class="memdesc:gacf9c7ad26943f00edb51d1a86141d46e"><td class="mdescLeft">&#160;</td><td class="mdescRight">ステータス情報を再設定する。(va_list版)  <a href="#gacf9c7ad26943f00edb51d1a86141d46e">More...</a><br /></td></tr>
<tr class="separator:gacf9c7ad26943f00edb51d1a86141d46e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4fab94b113dcd891a479629139ad9ac7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c7status.html#ga4fab94b113dcd891a479629139ad9ac7">c7_status_push</a></td></tr>
<tr class="memdesc:ga4fab94b113dcd891a479629139ad9ac7"><td class="mdescLeft">&#160;</td><td class="mdescRight">このマクロは <a class="el" href="group__c7status.html#ga8fd5357e4e7f6d2578ec52427d559a37" title="c7_status_push で退避した保存エリアを元に戻す。::c7_status_push 同様、ポインタの 付け替えのみなので高速に動作する。">c7_status_pop</a> と共に用い、一時的にステータス情報の保存エリアを退避し、 自動変数として準備したメモリをステータス情報の保存エリアとして使用する。この退避動作は ポインタの付け替えのみなので比較的高速に動作する。  <a href="#ga4fab94b113dcd891a479629139ad9ac7">More...</a><br /></td></tr>
<tr class="separator:ga4fab94b113dcd891a479629139ad9ac7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8fd5357e4e7f6d2578ec52427d559a37"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c7status.html#ga8fd5357e4e7f6d2578ec52427d559a37">c7_status_pop</a></td></tr>
<tr class="memdesc:ga8fd5357e4e7f6d2578ec52427d559a37"><td class="mdescLeft">&#160;</td><td class="mdescRight">c7_status_push で退避した保存エリアを元に戻す。::c7_status_push 同様、ポインタの 付け替えのみなので高速に動作する。  <a href="#ga8fd5357e4e7f6d2578ec52427d559a37">More...</a><br /></td></tr>
<tr class="separator:ga8fd5357e4e7f6d2578ec52427d559a37"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
ステータス情報の確認と文字列化</h2></td></tr>
<tr class="memitem:ga150ad617668b564c0e990d82b3c77b0a"><td class="memItemLeft" align="right" valign="top"><a id="ga150ad617668b564c0e990d82b3c77b0a"></a>
<a class="el" href="group__c7types.html#ga32dffe853a91b70665fd4c3b18a9d288">c7_bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c7status.html#ga150ad617668b564c0e990d82b3c77b0a">c7_status_has_error</a> (void)</td></tr>
<tr class="memdesc:ga150ad617668b564c0e990d82b3c77b0a"><td class="mdescLeft">&#160;</td><td class="mdescRight">現スレッドのステータス情報にステータス情報が残っていれば C7_TRUE を戻し、そうでなければ C7_FALSE を戻す。 <br /></td></tr>
<tr class="separator:ga150ad617668b564c0e990d82b3c77b0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6137749edc5bb8e0e2b9314572b053f7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__c7string__strbuf.html#gaad0bbcb830057114f446d45e08ccf6f5">c7_str_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c7status.html#ga6137749edc5bb8e0e2b9314572b053f7">c7_status_prefix</a> (<a class="el" href="group__c7string__strbuf.html#gaad0bbcb830057114f446d45e08ccf6f5">c7_str_t</a> *sbp, const char *file, int line)</td></tr>
<tr class="memdesc:ga6137749edc5bb8e0e2b9314572b053f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">ステータス情報を文字列化する際の行頭に挿入するプリフィクス文字列を作成する。  <a href="#ga6137749edc5bb8e0e2b9314572b053f7">More...</a><br /></td></tr>
<tr class="separator:ga6137749edc5bb8e0e2b9314572b053f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaddcb50896bd6b389af29199aac301160"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__c7string__strbuf.html#gaad0bbcb830057114f446d45e08ccf6f5">c7_str_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c7status.html#gaddcb50896bd6b389af29199aac301160">c7_status_string</a> (<a class="el" href="group__c7string__strbuf.html#gaad0bbcb830057114f446d45e08ccf6f5">c7_str_t</a> *sbp)</td></tr>
<tr class="memdesc:gaddcb50896bd6b389af29199aac301160"><td class="mdescLeft">&#160;</td><td class="mdescRight">現スレッドのステータス情報を文字列化してC7文字列 sbp に追加する。sbp が NULL の場合は <a class="el" href="group__c7string__strbuf.html#ga24cde018142087910bbc5c72c0e37dc1" title="C7文字列を c7_sg_malloc() で確保し、 バッファを c7_sg_realloc() で確保するように初期化してC7文字列のポインタを戻す。 メモリ確保に失敗した場合だけ C7_STR_N...">c7_str_new_sg()</a> で確保する。  <a href="#gaddcb50896bd6b389af29199aac301160">More...</a><br /></td></tr>
<tr class="separator:gaddcb50896bd6b389af29199aac301160"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga38fb132ba7cfe2a5e41839200c08e834"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c7status.html#ga38fb132ba7cfe2a5e41839200c08e834">c7_status_scan</a> (void(*scanner)(const char *file, int line, <a class="el" href="group__c7status.html#ga708d256a331017df499e3e945133434b">c7_status_t</a> status, const char *message, const void *__uctx), void *__uctx)</td></tr>
<tr class="memdesc:ga38fb132ba7cfe2a5e41839200c08e834"><td class="mdescLeft">&#160;</td><td class="mdescRight">現スレッドのステータス情報を走査する。  <a href="#ga38fb132ba7cfe2a5e41839200c08e834">More...</a><br /></td></tr>
<tr class="separator:ga38fb132ba7cfe2a5e41839200c08e834"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>ステータス情報などを保存する。 </p>
<hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="structc7__status__def__t" id="structc7__status__def__t"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structc7__status__def__t">&#9670;&nbsp;</a></span>c7_status_def_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct c7_status_def_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>ステータスコードの文字列化情報。 </p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="a93be5837d168cc8183cf12cc6fd5c19f"></a>const char *</td>
<td class="fieldname">
sts_msg</td>
<td class="fielddoc">
メッセージ文字列。所謂、エラーメッセージの文字列。 </td></tr>
<tr><td class="fieldtype">
<a id="a03cf77ba0dcab844980ad3ebb0479c18"></a>const char *</td>
<td class="fieldname">
sts_id</td>
<td class="fielddoc">
カテゴリー内の詳細コードに対応するニーモニック文字列。 </td></tr>
<tr><td class="fieldtype">
<a id="a91aab4b9fe25a654698f90bd308a778d"></a><a class="el" href="group__c7status.html#ga708d256a331017df499e3e945133434b">c7_status_t</a></td>
<td class="fieldname">
sts</td>
<td class="fielddoc">
ステータスコード。sts_id と異なりカテゴリーコードも含む。 </td></tr>
</table>

</div>
</div>
<a name="structc7__status__catalog__t" id="structc7__status__catalog__t"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structc7__status__catalog__t">&#9670;&nbsp;</a></span>c7_status_catalog_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct c7_status_catalog_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>ステータスコードのカタログ。 </p>
<p>以下はステータスコードのマクロ定義とカタログデータの定義の例である。</p>
<p>sts_def.py </p><div class="fragment"><div class="line"><span class="keyword">import</span> stsgen</div><div class="line"></div><div class="line">errno_h = <span class="stringliteral">&#39;./sts_errno.h&#39;</span></div><div class="line">table_h = <span class="stringliteral">&#39;./sts_table.h&#39;</span></div><div class="line"></div><div class="line">with stsgen.Catalog(<span class="stringliteral">&#39;some&#39;</span>, 0x2a, errno_h, table_h) as c:</div><div class="line">    c.OPNERR = <span class="stringliteral">&#39;open error&#39;</span>, 1</div><div class="line">    c.WRTERR = <span class="stringliteral">&#39;write error&#39;</span></div><div class="line">    c.RDERR = <span class="stringliteral">&#39;read error&#39;</span></div><div class="line">    c.CLSERR = <span class="stringliteral">&#39;read error&#39;</span></div><div class="line">    c.msg_code = 0x20</div><div class="line">    c.SOCKERR = <span class="stringliteral">&#39;socket error&#39;</span></div><div class="line">    c.CONNERR = <span class="stringliteral">&#39;connect error&#39;</span>, 0x25</div></div><!-- fragment --><p>libc7 で提供される stsgen.py を用いて上の sts_def.py を実行すると sts_errno.h と sts_table.h が生成される。</p>
<div class="fragment"><div class="line"><span class="preprocessor">#if !defined(STS_ERRNO_H_LOADED__)</span></div><div class="line"><span class="preprocessor">#define STS_ERRNO_H_LOADED__ 1</span></div><div class="line"></div><div class="line"><span class="preprocessor">#define SOME_E_OPNERR ((0x002a&lt;&lt;16)|0x0001) // open error</span></div><div class="line"><span class="preprocessor">#define SOME_E_WRTERR ((0x002a&lt;&lt;16)|0x0002) // write error</span></div><div class="line"><span class="preprocessor">#define SOME_E_RDERR ((0x002a&lt;&lt;16)|0x0003) // read error</span></div><div class="line"><span class="preprocessor">#define SOME_E_CLSERR ((0x002a&lt;&lt;16)|0x0004) // read error</span></div><div class="line"><span class="preprocessor">#define SOME_E_SOCKERR ((0x002a&lt;&lt;16)|0x0020) // socket error</span></div><div class="line"><span class="preprocessor">#define SOME_E_CONNERR ((0x002a&lt;&lt;16)|0x0025) // connect error</span></div><div class="line"></div><div class="line"><span class="preprocessor">#endif // sts_errno.h</span></div></div><!-- fragment --><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;c7status.h&gt;</span></div><div class="line"><span class="preprocessor">#include &quot;sts_errno.h&quot;</span></div><div class="line"></div><div class="line"><span class="keyword">static</span> <a class="code" href="group__c7status.html#structc7__status__def__t">c7_status_def_t</a> _Some_table[] = {</div><div class="line">  { <span class="stringliteral">&quot;open error&quot;</span>, <span class="stringliteral">&quot;OPNERR&quot;</span>, SOME_E_OPNERR },</div><div class="line">  { <span class="stringliteral">&quot;write error&quot;</span>, <span class="stringliteral">&quot;WRTERR&quot;</span>, SOME_E_WRTERR },</div><div class="line">  { <span class="stringliteral">&quot;read error&quot;</span>, <span class="stringliteral">&quot;RDERR&quot;</span>, SOME_E_RDERR },</div><div class="line">  { <span class="stringliteral">&quot;read error&quot;</span>, <span class="stringliteral">&quot;CLSERR&quot;</span>, SOME_E_CLSERR },</div><div class="line">  { <span class="stringliteral">&quot;socket error&quot;</span>, <span class="stringliteral">&quot;SOCKERR&quot;</span>, SOME_E_SOCKERR },</div><div class="line">  { <span class="stringliteral">&quot;connect error&quot;</span>, <span class="stringliteral">&quot;CONNERR&quot;</span>, SOME_E_CONNERR },</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keyword">static</span> <a class="code" href="group__c7status.html#structc7__status__catalog__t">c7_status_catalog_t</a> _Some_catalog = {</div><div class="line">  .<a class="code" href="group__c7status.html#ae31e25f6a15e6f00274541282cb6edab">cat</a> = 0x2a,</div><div class="line">  .cat_id = <span class="stringliteral">&quot;some&quot;</span>,</div><div class="line">  .defv = _Some_table,</div><div class="line">  .defc = <a class="code" href="group__c7types.html#gaa3ca3c564ee81140b519b5dca3472bc8">c7_numberof</a>(_Some_table),</div><div class="line">};</div></div><!-- fragment --> </div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="ae31e25f6a15e6f00274541282cb6edab"></a><a class="el" href="group__c7status.html#ga708d256a331017df499e3e945133434b">c7_status_t</a></td>
<td class="fieldname">
cat</td>
<td class="fielddoc">
12bitのカテゴリーコード。ステータスコードから <a class="el" href="group__c7status.html#ga0b049cbe68ce2797ba66b16e96825805" title="ステータスコードから12bitのカテゴリーコードを取り出す。">C7_STATUS_CAT()</a> で得る値。 </td></tr>
<tr><td class="fieldtype">
<a id="ac36198f1dcd2abf367d1dbd1ac4c1705"></a>const char *</td>
<td class="fieldname">
cat_id</td>
<td class="fielddoc">
カテゴリーのニーモニック文字列。 </td></tr>
<tr><td class="fieldtype">
<a id="a7a7ae8d977323d98bda06ba95ce07a0a"></a><a class="el" href="group__c7status.html#structc7__status__def__t">c7_status_def_t</a> *</td>
<td class="fieldname">
defv</td>
<td class="fielddoc">
ステータスコードの文字列化情報の配列。 配列の指す先は永続性のあるメモリでなければならない。 </td></tr>
<tr><td class="fieldtype">
<a id="a34add893af3eb7f01f36318acf64f5e4"></a>int</td>
<td class="fieldname">
defc</td>
<td class="fielddoc">
defc の指す配列の要素数。 </td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga4fab94b113dcd891a479629139ad9ac7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4fab94b113dcd891a479629139ad9ac7">&#9670;&nbsp;</a></span>c7_status_push</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define c7_status_push</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> { <a class="code" href="group__c7status.html#gafe83b074822e47cfffec54e954c59d76">c7_status_stack_t</a> __save_stack;    \</div><div class="line">    __c7_status_push(&amp;__save_stack)</div><div class="ttc" id="group__c7status_html_gafe83b074822e47cfffec54e954c59d76"><div class="ttname"><a href="group__c7status.html#gafe83b074822e47cfffec54e954c59d76">c7_status_stack_t</a></div><div class="ttdeci">struct c7_status_stack_t_ c7_status_stack_t</div><div class="ttdoc">ステータス情報の保存エリアの型。</div><div class="ttdef"><b>Definition:</b> c7status.dox:170</div></div>
</div><!-- fragment -->
<p>このマクロは <a class="el" href="group__c7status.html#ga8fd5357e4e7f6d2578ec52427d559a37" title="c7_status_push で退避した保存エリアを元に戻す。::c7_status_push 同様、ポインタの 付け替えのみなので高速に動作する。">c7_status_pop</a> と共に用い、一時的にステータス情報の保存エリアを退避し、 自動変数として準備したメモリをステータス情報の保存エリアとして使用する。この退避動作は ポインタの付け替えのみなので比較的高速に動作する。 </p>

</div>
</div>
<a id="ga8fd5357e4e7f6d2578ec52427d559a37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8fd5357e4e7f6d2578ec52427d559a37">&#9670;&nbsp;</a></span>c7_status_pop</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define c7_status_pop</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">__c7_status_pop();                              \</div><div class="line">    } <span class="keywordflow">while</span> (0)</div></div><!-- fragment -->
<p>c7_status_push で退避した保存エリアを元に戻す。::c7_status_push 同様、ポインタの 付け替えのみなので高速に動作する。 </p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="gafe83b074822e47cfffec54e954c59d76"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafe83b074822e47cfffec54e954c59d76">&#9670;&nbsp;</a></span>c7_status_stack_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct c7_status_stack_t_ <a class="el" href="group__c7status.html#gafe83b074822e47cfffec54e954c59d76">c7_status_stack_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ステータス情報の保存エリアの型。 </p>
<p>ステータス情報はスレッド毎に分離されたリングバッファに保存される。 バッファは C7_CONFIG_STS_RBUF_SIZE (デフォルトでは 2048) バイト分確保され、 そこに <a class="el" href="group__c7status.html#ga8f081e437b82497de02ae0bebe4f8ab9" title="ステータス情報を追加する。">c7_status_add()</a> などに渡したステータスコードやソースファイルの名称、 付加情報(文字列)が格納されていく。</p>
<p>このバッファは <a class="el" href="group__c7status.html#ga4fab94b113dcd891a479629139ad9ac7" title="このマクロは c7_status_pop と共に用い、一時的にステータス情報の保存エリアを退避し、 自動変数として準備したメモリをステータス情報の保存エリアとして使用する。この退避動作は ポインタの付け...">c7_status_push</a> を用いてスタック状に(しかも高速に)退避することができる。 また、メモリ間の完全なコピー動作を伴うが、c7_status_save(), <a class="el" href="group__c7status.html#ga81c6a3b8912c5789b636e108efb23fc0" title="コピーされたステータス情報を現スレッドのステータス情報に書き戻す。">c7_status_restore()</a> などを 用いて、スタックとは無関係に退避し、元に戻すことも可能である。 </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga94d49703aa8aa6475dd3ba76a5dca02e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga94d49703aa8aa6475dd3ba76a5dca02e">&#9670;&nbsp;</a></span>c7_status_add_catalog()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void c7_status_add_catalog </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__c7status.html#structc7__status__catalog__t">c7_status_catalog_t</a> *&#160;</td>
          <td class="paramname"><em>cat</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>カタログを登録する。 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cat</td><td>登録するカタログ。永続性のあるメモリを指していなければならない。 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gabae6aa29ed5dc2d87a8030eed64cdf28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabae6aa29ed5dc2d87a8030eed64cdf28">&#9670;&nbsp;</a></span>c7_status_add_convert()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void c7_status_add_convert </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__c7string__strbuf.html#gaad0bbcb830057114f446d45e08ccf6f5">c7_str_t</a> *(*)(<a class="el" href="group__c7string__strbuf.html#gaad0bbcb830057114f446d45e08ccf6f5">c7_str_t</a> *sbp, <a class="el" href="group__c7status.html#ga708d256a331017df499e3e945133434b">c7_status_t</a> status, void *arg)&#160;</td>
          <td class="paramname"><em>convert</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ステータスコードを文字列に変換するコンバータを登録する。 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">convert</td><td>コンバート関数。この関数は status と arg 引数からメッセージ文字列を構成し sbp に書き込む。 sbp には NULL でないC7文字列が渡される。コンバート関数で文字列化できれば sbp を戻す。 そうでなければ NULL を戻してよい。 </td></tr>
    <tr><td class="paramname">arg</td><td>convert関数に渡す引数。</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>現在のバージョンではコンバータは一つしか登録できない。 </dd></dl>

</div>
</div>
<a id="gac94f57f0ebde80d8919680d0e41d2f81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac94f57f0ebde80d8919680d0e41d2f81">&#9670;&nbsp;</a></span>c7_status_clear()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void c7_status_clear </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>現スレッドのステータス情報をクリアする。 </p>
<p>リングバッファのポインタを操作するだけなので高速である。errno はクリアしない。 </p>

</div>
</div>
<a id="gaca877bc1b0adc56ba065883c6abc07e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaca877bc1b0adc56ba065883c6abc07e4">&#9670;&nbsp;</a></span>c7_status_save()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void c7_status_save </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__c7status.html#gafe83b074822e47cfffec54e954c59d76">c7_status_stack_t</a> *&#160;</td>
          <td class="paramname"><em>save</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>現スレッドのステータス情報をコピーする。 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">save</td><td>ステータス情報のコピー先。 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga8e8534371c906d4db768e411a2efcb66"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8e8534371c906d4db768e411a2efcb66">&#9670;&nbsp;</a></span>c7_status_saveclear()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void c7_status_saveclear </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__c7status.html#gafe83b074822e47cfffec54e954c59d76">c7_status_stack_t</a> *&#160;</td>
          <td class="paramname"><em>save</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>現スレッドのステータス情報をコピー後クリアする。 </p>
<p><a class="el" href="group__c7status.html#gaca877bc1b0adc56ba065883c6abc07e4" title="現スレッドのステータス情報をコピーする。">c7_status_save()</a> と <a class="el" href="group__c7status.html#gac94f57f0ebde80d8919680d0e41d2f81" title="現スレッドのステータス情報をクリアする。">c7_status_clear()</a> を行なう。 </p>

</div>
</div>
<a id="ga81c6a3b8912c5789b636e108efb23fc0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga81c6a3b8912c5789b636e108efb23fc0">&#9670;&nbsp;</a></span>c7_status_restore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void c7_status_restore </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__c7status.html#gafe83b074822e47cfffec54e954c59d76">c7_status_stack_t</a> *&#160;</td>
          <td class="paramname"><em>saved</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>コピーされたステータス情報を現スレッドのステータス情報に書き戻す。 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">saved</td><td><a class="el" href="group__c7status.html#gaca877bc1b0adc56ba065883c6abc07e4" title="現スレッドのステータス情報をコピーする。">c7_status_save()</a>で保存したステータス情報のコピー。 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga8f081e437b82497de02ae0bebe4f8ab9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8f081e437b82497de02ae0bebe4f8ab9">&#9670;&nbsp;</a></span>c7_status_add()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void c7_status_add </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__c7status.html#ga708d256a331017df499e3e945133434b">c7_status_t</a>&#160;</td>
          <td class="paramname"><em>status</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ステータス情報を追加する。 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">status</td><td>ステータスコード。0 でも構わない。 </td></tr>
    <tr><td class="paramname">fmt</td><td>追加メッセージのための書式指定文字列。printf(3)形式。NULLでも構わない。 </td></tr>
    <tr><td class="paramname">...</td><td>追加メッセージの可変引数。</td></tr>
  </table>
  </dd>
</dl>
<p>status と追加メッセージ、及びこのAPIを呼び出したソースファイルの名前と行番号を保存エリアへ追加する。 追加メッセージは fmt, ... で得られる文字列で、fmt が NULLの場合は追加メッセージはなしとする。 この関数の呼び出しで errno は変更されない。 </p>

</div>
</div>
<a id="ga4f57a4f5e86f0ef96c2e2a3439229d38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4f57a4f5e86f0ef96c2e2a3439229d38">&#9670;&nbsp;</a></span>c7_status_add_va()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void c7_status_add_va </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__c7status.html#ga708d256a331017df499e3e945133434b">c7_status_t</a>&#160;</td>
          <td class="paramname"><em>status</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">va_list&#160;</td>
          <td class="paramname"><em>ap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ステータス情報を追加する。(va_list版) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">status</td><td>ステータスコード。0 でも構わない。 </td></tr>
    <tr><td class="paramname">fmt</td><td>追加メッセージのための書式指定文字列。printf(3)形式。NULLでも構わない。 </td></tr>
    <tr><td class="paramname">ap</td><td>追加メッセージの可変引数へのアクセス用。</td></tr>
  </table>
  </dd>
</dl>
<p>status と追加メッセージ、及びこのAPIを呼び出したソースファイルの名前と行番号を保存エリアへ追加する。 追加メッセージは fmt, ap で得られる文字列で、fmt が NULLの場合は追加メッセージはなしとする。 この関数の呼び出しで errno は変更されない。 </p>

</div>
</div>
<a id="gaa67abfdfaf8e0d163305bdf8bab2c913"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa67abfdfaf8e0d163305bdf8bab2c913">&#9670;&nbsp;</a></span>c7_status_reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void c7_status_reset </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__c7status.html#ga708d256a331017df499e3e945133434b">c7_status_t</a>&#160;</td>
          <td class="paramname"><em>status</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ステータス情報を再設定する。 </p>
<p><a class="el" href="group__c7status.html#gac94f57f0ebde80d8919680d0e41d2f81" title="現スレッドのステータス情報をクリアする。">c7_status_clear()</a> して <a class="el" href="group__c7status.html#ga8f081e437b82497de02ae0bebe4f8ab9" title="ステータス情報を追加する。">c7_status_add()</a> する。 </p>

</div>
</div>
<a id="gacf9c7ad26943f00edb51d1a86141d46e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacf9c7ad26943f00edb51d1a86141d46e">&#9670;&nbsp;</a></span>c7_status_reset_va()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void c7_status_reset_va </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__c7status.html#ga708d256a331017df499e3e945133434b">c7_status_t</a>&#160;</td>
          <td class="paramname"><em>status</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">va_list&#160;</td>
          <td class="paramname"><em>ap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ステータス情報を再設定する。(va_list版) </p>
<p><a class="el" href="group__c7status.html#gac94f57f0ebde80d8919680d0e41d2f81" title="現スレッドのステータス情報をクリアする。">c7_status_clear()</a> して <a class="el" href="group__c7status.html#ga4f57a4f5e86f0ef96c2e2a3439229d38" title="ステータス情報を追加する。(va_list版)">c7_status_add_va()</a> する。 </p>

</div>
</div>
<a id="ga6137749edc5bb8e0e2b9314572b053f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6137749edc5bb8e0e2b9314572b053f7">&#9670;&nbsp;</a></span>c7_status_prefix()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__c7string__strbuf.html#gaad0bbcb830057114f446d45e08ccf6f5">c7_str_t</a>* c7_status_prefix </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__c7string__strbuf.html#gaad0bbcb830057114f446d45e08ccf6f5">c7_str_t</a> *&#160;</td>
          <td class="paramname"><em>sbp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>line</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ステータス情報を文字列化する際の行頭に挿入するプリフィクス文字列を作成する。 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sbp</td><td>プリフィクス文字列を格納するC7文字列。NULLの場合は <a class="el" href="group__c7string__strbuf.html#ga24cde018142087910bbc5c72c0e37dc1" title="C7文字列を c7_sg_malloc() で確保し、 バッファを c7_sg_realloc() で確保するように初期化してC7文字列のポインタを戻す。 メモリ確保に失敗した場合だけ C7_STR_N...">c7_str_new_sg()</a> で確保される。 </td></tr>
    <tr><td class="paramname">file</td><td>プリフィクス作成時に参考情報となるソースファイル名。 </td></tr>
    <tr><td class="paramname">line</td><td>同ソースファイルの行番号。 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>sbp に <a class="el" href="group__c7string__strbuf.html#ga0214d7ca8a2c6a42af61980252d6127d" title="C7文字列 sbp に printf(fmt, ...) 相当の結果を追加する。">c7_sprintf()</a> を適用した結果がそのまま戻される。</dd></dl>
<p>この関数は、c7status の外部から、c7_status_string() が作りだす文字列と同様のプリフィクスを 表示の体裁合わせで必要とすることを想定して準備された。実際に c7app 内の関数が呼びだしている。</p>
<p>このプリフィクス文字列は、c7dconf の <a class="el" href="group__c7dconf.html#gga06fc87d81c62e9abb8790b6e5713c55ba5ff839e0c98843b162582112103afd5e" title="c7echo/c7statusでのプリフィクスタイプ">C7_DCONF_PREF</a> の値毎に次のようになっている。</p><ul>
<li>0 の場合は "(ファイル名:行番号): "</li>
<li>1 の場合は "プログラム名: "</li>
<li>2 の場合は "プログラム名(ファイル名:行番号): "</li>
</ul>
<p>ここでプログラム名は、ライブラリロード時に /proc/&lt;PID&gt;/cmdline から得られるか、main() の直下などで <a class="el" href="group__c7app.html#gaf6c1861e5461815dfb3e091b2798107e" title="libc7 を初期化する [非GNU環境では必要]">c7_init()</a> を呼んで明示的に保存しておかなければ空文字列となる。 </p>

</div>
</div>
<a id="gaddcb50896bd6b389af29199aac301160"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaddcb50896bd6b389af29199aac301160">&#9670;&nbsp;</a></span>c7_status_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__c7string__strbuf.html#gaad0bbcb830057114f446d45e08ccf6f5">c7_str_t</a>* c7_status_string </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__c7string__strbuf.html#gaad0bbcb830057114f446d45e08ccf6f5">c7_str_t</a> *&#160;</td>
          <td class="paramname"><em>sbp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>現スレッドのステータス情報を文字列化してC7文字列 sbp に追加する。sbp が NULL の場合は <a class="el" href="group__c7string__strbuf.html#ga24cde018142087910bbc5c72c0e37dc1" title="C7文字列を c7_sg_malloc() で確保し、 バッファを c7_sg_realloc() で確保するように初期化してC7文字列のポインタを戻す。 メモリ確保に失敗した場合だけ C7_STR_N...">c7_str_new_sg()</a> で確保する。 </p>
<p><a class="el" href="group__c7status.html#ga8f081e437b82497de02ae0bebe4f8ab9" title="ステータス情報を追加する。">c7_status_add()</a> などで追加されたステータスコード status は次のように文字列に変換される:</p><ol type="1">
<li>status が 0 であればステータスコードは処理しない。</li>
<li>status のカテゴリーが 0 の場合は strerror() で文字列化する。</li>
<li><a class="el" href="group__c7status.html#ga94d49703aa8aa6475dd3ba76a5dca02e" title="カタログを登録する。">c7_status_add_catalog()</a> の順番とは逆順にカテゴリーコードの一致するカタログを探す。<ol type="a">
<li>カタログの defv[] (ステータスコードの文字列化情報の配列) に一致するステータスコードがあれば、 それまでの情報から文字列化する。</li>
<li>カタログ内に見つからなければカテゴリーのみ文字列としてステータスコードを数値として文字列化する。</li>
</ol>
</li>
<li>一致するカタログがなければ <a class="el" href="group__c7status.html#gabae6aa29ed5dc2d87a8030eed64cdf28" title="ステータスコードを文字列に変換するコンバータを登録する。">c7_status_add_convert()</a> で登録されたコンバータを用いて文字列化を試みる。</li>
<li>これでも文字列化できなければ、カテゴリコード、詳細コードをすべて数値として文字列化する。</li>
<li>1.以外の場合、得られた文字列の前に <a class="el" href="group__c7status.html#ga6137749edc5bb8e0e2b9314572b053f7" title="ステータス情報を文字列化する際の行頭に挿入するプリフィクス文字列を作成する。">c7_status_prefix()</a> で得られるプリフィクスを挿入する。</li>
</ol>
<p>また、追加メッセージ文字列がある場合は以下のように処理される。</p><ol type="1">
<li>追加メッセージが ": " で始まっていれば ": " を <a class="el" href="group__c7status.html#ga6137749edc5bb8e0e2b9314572b053f7" title="ステータス情報を文字列化する際の行頭に挿入するプリフィクス文字列を作成する。">c7_status_prefix()</a> で得られるプリフィクスに置換する。</li>
<li>追加メッセージに "\n: " があれば、その個所の ": " を 1. 同様に置換する。</li>
</ol>
<p>なお、保存エリアにあるステータス情報のうち dconf の C7_DCONF_STSSCN_MAX の値の分だけが処理される。 この値のデフォルト値は 10 である。 </p>

</div>
</div>
<a id="ga38fb132ba7cfe2a5e41839200c08e834"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga38fb132ba7cfe2a5e41839200c08e834">&#9670;&nbsp;</a></span>c7_status_scan()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void c7_status_scan </td>
          <td>(</td>
          <td class="paramtype">void(*)(const char *file, int line, <a class="el" href="group__c7status.html#ga708d256a331017df499e3e945133434b">c7_status_t</a> status, const char *message, const void *__uctx)&#160;</td>
          <td class="paramname"><em>scanner</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>__uctx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>現スレッドのステータス情報を走査する。 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">scanner</td><td>ステータス情報にアクセスするための関数。 </td></tr>
    <tr><td class="paramname">__uctx</td><td>scanner() の最終引数に渡すパラメータ。</td></tr>
  </table>
  </dd>
</dl>
<p>保存エリアにあるステータス情報のうち最新から dconf の C7_DCONF_STSSCN_MAX の値の分について、 古い方から走査し、scanner で指定した関数を呼び出す。 </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
